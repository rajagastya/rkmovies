{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\ReactProjects\\\\src\\\\Components\\\\Home\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getPopularMovies } from \"../../api/movies\";\nimport Paginate from \"../Paginate/Paginate\";\nimport MovieCard from \"../MovieCard/MovieCard\";\nimport styles from \"./Home.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Home() {\n  _s();\n  const [popularMovies, setPopularMovies] = useState([]);\n  const [isDataLoaded, setIsDataLoaded] = useState(false);\n  const [totalPages, setTotalPages] = useState(1);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isMoreMoviesLoading, setIsMoreMoviesLoading] = useState(false);\n  const [isNearEnd, setIsNearEnd] = useState(false);\n  const fetchPopularMovies = page => {\n    setIsMoreMoviesLoading(true);\n    getPopularMovies(page).then(res => {\n      setIsMoreMoviesLoading(false);\n      setIsDataLoaded(true);\n      if (!res) return;\n      if (page === 1) {\n        setTotalPages(res.total_pages);\n        setPopularMovies(res.results);\n      } else {\n        setPopularMovies(prev => [...prev, ...(res === null || res === void 0 ? void 0 : res.results)]);\n      }\n      setCurrentPage(res === null || res === void 0 ? void 0 : res.page);\n    });\n  };\n  const handlePaginate = () => {\n    if (isMoreMoviesLoading || currentPage >= totalPages) return;\n    fetchPopularMovies(currentPage + 1);\n  };\n  useEffect(() => {\n    if (isNearEnd) handlePaginate();\n  }, [isNearEnd]);\n  useEffect(() => {\n    fetchPopularMovies(1);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: !isDataLoaded ? \"Loading...\" : /*#__PURE__*/_jsxDEV(Paginate, {\n      onIntersection: isOnEnd => setIsNearEnd(isOnEnd),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.title,\n        children: \"Popular movies\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.innerContainer,\n        children: [popularMovies.map((item, index) => /*#__PURE__*/_jsxDEV(MovieCard, {\n          movie: item\n        }, item.id + index + \"\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }, this)), isMoreMoviesLoading && /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"ojvmW0lFGxiaNBnZHrAinNqWn4Y=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","getPopularMovies","Paginate","MovieCard","styles","jsxDEV","_jsxDEV","Home","_s","popularMovies","setPopularMovies","isDataLoaded","setIsDataLoaded","totalPages","setTotalPages","currentPage","setCurrentPage","isMoreMoviesLoading","setIsMoreMoviesLoading","isNearEnd","setIsNearEnd","fetchPopularMovies","page","then","res","total_pages","results","prev","handlePaginate","className","container","children","onIntersection","isOnEnd","title","fileName","_jsxFileName","lineNumber","columnNumber","innerContainer","map","item","index","movie","id","_c","$RefreshReg$"],"sources":["C:/Users/DELL/ReactProjects/src/Components/Home/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport { getPopularMovies } from \"../../api/movies\";\r\n\r\nimport Paginate from \"../Paginate/Paginate\";\r\nimport MovieCard from \"../MovieCard/MovieCard\";\r\n\r\nimport styles from \"./Home.module.css\";\r\n\r\nfunction Home() {\r\n  const [popularMovies, setPopularMovies] = useState([]);\r\n  const [isDataLoaded, setIsDataLoaded] = useState(false);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [isMoreMoviesLoading, setIsMoreMoviesLoading] = useState(false);\r\n  const [isNearEnd, setIsNearEnd] = useState(false);\r\n\r\n  const fetchPopularMovies = (page) => {\r\n    setIsMoreMoviesLoading(true);\r\n    getPopularMovies(page).then((res) => {\r\n      setIsMoreMoviesLoading(false);\r\n      setIsDataLoaded(true);\r\n      if (!res) return;\r\n      if (page === 1) {\r\n        setTotalPages(res.total_pages);\r\n        setPopularMovies(res.results);\r\n      } else {\r\n        setPopularMovies((prev) => [...prev, ...res?.results]);\r\n      }\r\n      setCurrentPage(res?.page);\r\n    });\r\n  };\r\n\r\n  const handlePaginate = () => {\r\n    if (isMoreMoviesLoading || currentPage >= totalPages) return;\r\n    fetchPopularMovies(currentPage + 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isNearEnd) handlePaginate();\r\n  }, [isNearEnd]);\r\n\r\n  useEffect(() => {\r\n    fetchPopularMovies(1);\r\n  }, []);\r\n  return (\r\n    <div className={styles.container}>\r\n      {!isDataLoaded ? (\r\n        \"Loading...\"\r\n      ) : (\r\n        <Paginate onIntersection={(isOnEnd) => setIsNearEnd(isOnEnd)}>\r\n          <div className={styles.title}>Popular movies</div>\r\n          <div className={styles.innerContainer}>\r\n            {popularMovies.map((item, index) => (\r\n              <MovieCard movie={item} key={item.id + index + \"\"} />\r\n            ))}\r\n            {isMoreMoviesLoading && <b>Loading...</b>}\r\n          </div>\r\n        </Paginate>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}